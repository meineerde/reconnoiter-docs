<?xml version="1.0"?>
<section>
  <title>http</title>
  <para>
    The http module performs GET requests over either HTTP or HTTPS and 
    checks the return code.
  </para>
  <variablelist>
    <varlistentry>
      <term>loader</term>
      <listitem>
        <para>C</para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>image</term>
      <listitem>
        <para>http.so</para>
      </listitem>
    </varlistentry>
  </variablelist>
  <section>
    <title>Module Configuration</title>
    <variablelist>
      <varlistentry>
        <term>url</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            The default URL to be used by checks that do not specify an 
            explicit URL.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>ca_chain</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            A path to a file containing all the certificate authorities that 
            should be loaded to validate the remote certificate (for SSL 
            checks).  This is used for SSL checks if this paramter is not set 
            explicitly in the check config.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>certificate_file</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            A path to a file containing all the client certificate that will 
            be presented to the remote server (for SSL checks).  This is used 
            for SSL checks if this paramter is not set explicitly in the check
            config.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Check Configuration</title>
    <variablelist>
      <varlistentry>
        <term>url</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>required</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            The URL including schema and hostname (as you would type into a 
            browser's location bar).
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>ca_chain</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            A path to a file containing all the certificate authorities that 
            should be loaded to validate the remote certificate (for SSL 
            checks).
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>certificate_file</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>.+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            A path to a file containing all the client certificate that will 
            be presented to the remote server (for SSL checks).
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>code</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>default</term>
              <listitem>
                <para>200</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>[1-5][0-9][0-9]</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
            The HTTP code that is expected.  If the code received matches 
            this code, the check is marked as "good," if it does not match, 
            it is marked as "bad."
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <example>
    <title>Checking an HTTP and HTTPS URL.</title>
    <para>
      This example checks the OmniTI Labs website over both HTTP and HTTPS.
    </para>
    <programlisting>
      &lt;noit&gt;
        &lt;modules&gt;
          &lt;module image="http" name="http"&gt;
            &lt;config&gt;&lt;ca_chain&gt;/etc/ssl/ca.crt&lt;/ca_chain&gt;&lt;/config&gt;
          &lt;/module&gt;
        &lt;/modules&gt;
        &lt;checks&gt;
          &lt;labs target="8.8.38.5" module="http"&gt;
            &lt;check uuid="fe3e984c-7895-11dd-90c1-c74c31b431f0" name="http"&gt;
              &lt;config&gt;&lt;url&gt;http://labs.omniti.com/&lt;/url&gt;&lt;/config&gt;
            &lt;/check&gt;
            &lt;check uuid="1ecd887a-7896-11dd-b28d-0b4216877f83" name="https"&gt;
              &lt;config&gt;&lt;url&gt;https://labs.omniti.com/&lt;/url&gt;&lt;/config&gt;
            &lt;/check&gt;
          &lt;/labs&gt;
        &lt;/checks&gt;
      &lt;/noit&gt;
    </programlisting>
  </example>
</section>
<!--
vim:ts=2:sw=2:et:
-->
