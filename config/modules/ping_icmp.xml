<?xml version="1.0"?>
<section>
  <title>ping_icmp</title>
  <para>The ping_icmp module provide ICMP checks against targets.  It sends a series of ICMP requests and waits for their responses tallying their turn-around time.</para>
  <variablelist>
    <varlistentry>
      <term>loader</term>
      <listitem>
        <para>C</para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>image</term>
      <listitem>
        <para>ping_icmp.so</para>
      </listitem>
    </varlistentry>
  </variablelist>
  <section>
    <title>Module Configuration</title>
  </section>
  <section>
    <title>Check Configuration</title>
    <variablelist>
      <varlistentry>
        <term>interval</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>default</term>
              <listitem>
                <para>2000</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>\d+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>The number of milliseconds between ICMP requests.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>count</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>default</term>
              <listitem>
                <para>5</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>\d+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>The number of ICMP requests to send during a single check.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <variablelist>
      <varlistentry>
        <term>avail_needed</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term>required</term>
              <listitem>
                <para>optional</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>default</term>
              <listitem>
                <para>100</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>allowed</term>
              <listitem>
                <para>\d+</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>The percentage of ICMP available required for the check to be considered "good."  By default, 100% of the ICMP requests must have responses for a good state.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <example>
    <title>Ping checks against a host</title>
    <para>Ping 4.2.2.1 once a second for ten seconds recurring every 60 seconds.</para>
    <programlisting>
      &lt;noit&gt;
        &lt;modules&gt;
          &lt;module image="ping_icmp" name="ping_icmp"/&gt;
        &lt;/modules&gt;
        &lt;checks&gt;
          &lt;ping module="ping_icmp" period="60000"&gt;
            &lt;config&gt;
              &lt;count&gt;10&lt;/count&gt;
              &lt;interval&gt;1000&lt;/interval&gt;
            &lt;/config&gt;
            &lt;check uuid="5b9fab60-77d4-11dd-99a4-97df794be4c8" target="4.2.2.1"/&gt;
          &lt;/ping&gt;
        &lt;/checks&gt;
      &lt;/noit&gt;
    </programlisting>
  </example>
</section>
